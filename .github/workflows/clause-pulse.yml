name: Clause Badge Pulse Automation

on:
  push:
    paths:
      - 'src/**'
      - 'docs/**'
      - 'README.md'

jobs:
  pulse-badges:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Detect shimmer vanish
        run: |
          echo "🪶 Glyph vanish detected..."
          grep '✅ Vanished' docs/shimmer-foresight.md || echo "No vanish overlays detected."

      - name: Trigger clause badge pulse
        run: |
          echo "🛡️ Triggering clause badge pulse..."
          grep '✅ Applied' docs/shimmer-clause-index.md || echo "No clause pulses found."

      - name: Index foresight registry
        run: |
          echo "🔮 Indexing apprentice foresight..."
          grep 'Foresight Indexed' docs/apprentice-echo.md || echo "No foresight indexed."

      - name: Update sovereign registry
        run: |
          echo "🗂️ Updating sovereign registry..."
          grep 'Registry.index' docs/Registry.md || echo "No registry invocation found."
